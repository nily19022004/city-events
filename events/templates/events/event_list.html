{% extends 'events/base.html' %}

{% block title %}–ê—Ñ–∏—à–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π{% endblock %}

{% block content %}
<h1 class="mb-4">üé≠ –ê—Ñ–∏—à–∞ –≥–æ—Ä–æ–¥—Å–∫–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</h1>

<!-- –ü–æ–∏—Å–∫ -->
<div class="row mb-4">
    <div class="col-md-6">
        <input type="text" 
               id="searchInput" 
               class="form-control" 
               placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –º–µ—Å—Ç—É..."
               onkeyup="filterEvents()">
    </div>
</div>

{% for event in events %}
<div class="card mb-3">
    <div class="card-body">
        <h5 class="card-title">{{ event.title }}</h5>
        <p class="card-text">
            üìÖ <strong>–î–∞—Ç–∞:</strong> {{ event.date|date:"d.m.Y" }}
            {% if event.time %}‚è∞ {{ event.time|time:"H:i" }}{% endif %}<br>
            üìç <strong>–ú–µ—Å—Ç–æ:</strong> {{ event.location }}
        </p>
        <p class="card-text">{{ event.short_description }}</p>
        <a href="{% url 'event_detail' event.id %}" class="btn btn-primary">
            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
        </a>
    </div>
</div>
{% empty %}
<div class="alert alert-info">
    –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.
</div>
{% endfor %}

<script>
function filterEvents() {
    const input = document.getElementById('searchInput');
    const filter = input.value.toLowerCase();
    const cards = document.querySelectorAll('.card');
    
    cards.forEach(card => {
        const title = card.querySelector('.card-title').textContent.toLowerCase();
        const location = card.querySelector('.card-text').textContent.toLowerCase();
        
        if (title.includes(filter) || location.includes(filter)) {
            card.style.display = '';
        } else {
            card.style.display = 'none';
        }
    });
}
</script>

{% endblock %}